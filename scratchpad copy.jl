using Dates, JSON, LifeInsuranceDataModel, LifeInsuranceProduct, ToStruct

tij = Dict{String,Any}("tariff_ref" => Dict{String,Any}("rev" => Dict{String,Any}("ref_validfrom" => Dict{String,Any}("value" => 11), "ref_invalidfrom" => Dict{String,Any}("value" => 15), "parameters" => "{\"n\": {\"type\": \"Int\", \"default\": 0,\"value\":null},\n \"m\": {\"type\": \"Int\", \"default\": 0,\"value\":null},\n \"C\": {\"type\": \"Int\", \"default\": 0,\"value\":null},\n \"begin\": {\"type\": \"Date\", \"default\": \"2020-01-01\",\"value\":null}\n}\n  ", "ref_component" => Dict{String,Any}("value" => 1), "id" => Dict{String,Any}("value" => 1), "ref_role" => Dict{String,Any}("value" => 1), "description" => "Main Coverage - Two Life", "ref_tariff" => Dict{String,Any}("value" => 5)), "ref" => Dict{String,Any}("tsdb_validfrom" => "2023-03-05T18:22:55.928+00:00", "ref_history" => Dict{String,Any}("value" => 9007199254740991), "revision" => Dict{String,Any}("ref_validfrom" => Dict{String,Any}("value" => 7), "ref_invalidfrom" => Dict{String,Any}("value" => 9007199254740991), "parameters" => "{\"n\": {\"type\": \"Int\", \"default\": 0,\"value\":null},\n \"m\": {\"type\": \"Int\", \"default\": 0,\"value\":null},\n \"C\": {\"type\": \"Int\", \"default\": 0,\"value\":null},\n \"begin\": {\"type\": \"Date\", \"default\": \"2020-01-01\",\"value\":null}\n}\n  ", "mortality_table" => "2001 VBT Residual Standard Select and Ultimate - Male Nonsmoker, ANB", "ref_component" => Dict{String,Any}("value" => 5), "id" => Dict{String,Any}("value" => 5), "description" => "Two Life Risk Insurance"), "ref_version" => Dict{String,Any}("value" => 9007199254740991), "tsw_validfrom" => "2023-03-05T18:22:55.928+00:00", "partner_roles" => Any[Dict{String,Any}("ref_validfrom" => Dict{String,Any}("value" => 7), "ref_invalidfrom" => Dict{String,Any}("value" => 9007199254740991), "ref_component" => Dict{String,Any}("value" => 5), "id" => Dict{String,Any}("value" => 5), "ref_role" => Dict{String,Any}("value" => 1)), Dict{String,Any}("ref_validfrom" => Dict{String,Any}("value" => 7), "ref_invalidfrom" => Dict{String,Any}("value" => 9007199254740991), "ref_component" => Dict{String,Any}("value" => 6), "id" => Dict{String,Any}("value" => 6), "ref_role" => Dict{String,Any}("value" => 2))])), "partner_refs" => Any[Dict{String,Any}("rev" => Dict{String,Any}("ref_validfrom" => Dict{String,Any}("value" => 11), "ref_invalidfrom" => Dict{String,Any}("value" => 9007199254740991), "ref_partner" => Dict{String,Any}("value" => 1), "ref_component" => Dict{String,Any}("value" => 1), "id" => Dict{String,Any}("value" => 1), "ref_role" => Dict{String,Any}("value" => 1), "description" => ""), "ref" => Dict{String,Any}("tsdb_validfrom" => "2023-03-05T18:22:55.939+00:00", "ref_history" => Dict{String,Any}("value" => 9007199254740991), "revision" => Dict{String,Any}("ref_validfrom" => Dict{String,Any}("value" => 1), "ref_invalidfrom" => Dict{String,Any}("value" => 9007199254740991), "date_of_birth" => "2000-01-01", "ref_component" => Dict{String,Any}("value" => 1), "id" => Dict{String,Any}("value" => 1), "description" => "Partner 1"), "ref_version" => Dict{String,Any}("value" => 9007199254740991), "tsw_validfrom" => "2023-03-05T18:22:55.939+00:00"))], "contract_attributes" => Dict{String,Any}("begin" => Dict{String,Any}("default" => "2020-01-01", "value" => nothing, "type" => "Date"), "m" => Dict{String,Any}("default" => 0, "value" => nothing, "type" => "Int"), "C" => Dict{String,Any}("default" => 0, "value" => nothing, "type" => "Int"), "n" => Dict{String,Any}("default" => 0, "value" => nothing, "type" => "Int")))
ti = ToStruct.tostruct(TariffItemSection, tij)


tif = get_tariff_interface(Val(1))
tif.calls["calculation_target"]["selected"] = "채"
tif.calls["calculation_target"]["채"]["m"]["value"] = "4"
tif.calls["calculation_target"]["채"]["n"]["value"] = "5"
tif.calls["calculation_target"]["채"]["frequency"]["value"] = "12"
tif.calculator(ti, tif.calls)